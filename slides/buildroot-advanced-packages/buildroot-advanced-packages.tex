\section{Advanced package aspects}

\begin{frame}[fragile]{Licensing report: introduction}
  \begin{itemize}
  \item A key aspect of embedded Linux systems is {\bf license
      compliance}.
  \item Embedded Linux systems integrate together a number of
    open-source components, each distributed under its own license.
  \item The different open-source licenses may have {\bf different
      requirements}, that must be met before the product using the
    embedded Linux system starts shipping.
  \item Buildroot helps in this license compliance process by offering
    the possibility of generating a number of {\bf license-related
      information} from the list of selected packages.
  \item Generated using:
\begin{block}{}
\begin{verbatim}
$ make legal-info
\end{verbatim}
\end{block}
  \end{itemize}
\end{frame}

\begin{frame}{Licensing report: contents}

\end{frame}

\begin{frame}{Including licensing information in packages}
  \begin{itemize}
  \item \code{<pkg>_LICENSE}
    \begin{itemize}
    \item Comma-separated {\bf list of license(s)} under which the
      package is distributed.
    \item Free form string, but should use the license codes from
      \url{https://spdx.org/licenses/}
    \item Can indicate which part is under which license (programs,
      tests, libraries, etc.)
    \end{itemize}
  \item \code{<pkg>_LICENSE_FILES}
    \begin{itemize}
    \item Space-separated {\bf list of file paths} from the package
      source code containing the license text and copyright
      information
    \item Paths relative to the package top-level source directory
    \end{itemize}
  \item \code{<pkg>_REDISTRIBUTE}
    \begin{itemize}
    \item Boolean indicating whether the package source code should be
      redistributed or not (part of the \code{legal-info} output)
    \item Defaults to \code{YES}, can be overriden to \code{NO}
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Licensing information examples}
  \begin{block}{linux.mk}
\begin{minted}{make}
LINUX_LICENSE = GPLv2
LINUX_LICENSE_FILES = COPYING
\end{minted}
  \end{block}

\begin{block}{acl.mk}
\begin{minted}{make}
ACL_LICENSE = GPLv2+ (programs), LGPLv2.1+ (libraries)
ACL_LICENSE_FILES = doc/COPYING doc/COPYING.LGPL
\end{minted}
\end{block}

\begin{block}{owl-linux.mk}
\begin{minted}{make}
OWL_LINUX_LICENSE = PROPRIETARY
OWL_LINUX_LICENSE_FILES = LICENSE
OWL_LINUX_REDISTRIBUTE = NO
\end{minted}
\end{block}

\end{frame}

\begin{frame}{Users, permissions, devices}

\code{<pkg>_USERS}
\code{<pkg>_PERMISSIONS}
\code{<pkg>_DEVICES}

\end{frame}

\begin{frame}{Init script, systemd unit files}

\code{<pkg>_INSTALL_INIT_SYSV}
\code{<pkg>_INSTALL_INIT_SYSTEMD}

\end{frame}

\begin{frame}{Config scripts}

\code{<pkg>_CONFIG_SCRIPTS}

\end{frame}

\begin{frame}{Hooks}

\end{frame}

\begin{frame}{Overriding commands}

\end{frame}

\setuplabframe
{Advanced package recipe tricks}
{
  \begin{itemize}
  \item Use {\em hooks} in packages
  \item Use special features for custom software
  \end{itemize}
}
